{% extends 'base.html' %}

{% block head %}
<title>Login</title>
{% endblock %}

{% block body %}
<div class="login-signup-container" style="height: auto">
    <h1 style="text-align: left;">Already have an account?</h1>

    <!-- Display Login Status Message -->
    {% if message %}
        <div id="message" style="text-align: center; color: {{ message_color }}; font-size: 1.2em; margin-bottom: 20px;">
            {{ message }}
        </div>
    {% endif %}

    <!-- Login Form -->
    <form action="{{ url_for('main.login') }}" method="post">
        <!-- Username -->
        <label for="username">Username</label>
        <input type="text" id="username" name="username" placeholder="Enter your username" required>

        <!-- Password -->
        <label for="password">Password</label>
        <div style="position: relative;">
            <input type="password" id="password" name="password" placeholder="Enter your password" required style="padding-right: 40px;">
            <button type="button" onclick="togglePassword()" style="position: absolute; right: 10px; top: 5px; background: none; border: none; cursor: pointer;">üëÅÔ∏è</button>
        </div>

        <script>
            function togglePassword() {
                const passwordField = document.getElementById('password');
                const type = passwordField.type === 'password' ? 'text' : 'password';
                passwordField.type = type;
            }
        </script>


        <button type="submit" class="btn btn-black">Log in</button>
    </form>

    <!-- No Account / Sign Up -->
    <div style="text-align: right; margin-top: 20px;">
        <span class="no-account">No account:</span>
        <form action="{{ url_for('main.signup') }}" method="get" style="display: inline;">
            <button type="submit" class="btn btn-transparant">Sign Up</button>
        </form>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Find the flash message by targeting common classes for alert messages
        const flashMessages = document.querySelectorAll('.alert, .flash, .alert-success');
        flashMessages.forEach(function(flashMessage) {
            // Set a timeout to hide the message after 2 seconds
            setTimeout(function() {
                flashMessage.style.transition = 'opacity 1s ease-out';
                flashMessage.style.opacity = '0'; // Gradually fade out
                
                // After fading out, set display to 'none' to remove it from the layout
                setTimeout(function() {
                    flashMessage.style.display = 'none';
                }, 1000); // Matches the CSS transition time (1 second)
            }, 2000); // Wait 2 seconds before starting the fade-out
        });
    });
</script>
{% endblock %}
