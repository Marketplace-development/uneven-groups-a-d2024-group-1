{% extends 'base.html' %}

{% block head %}
<title>Login</title>
{% endblock %}

{% block body %}
<div class="login-signup-container" style="height: auto">
    <h1 style="text-align: left;">Already have an account?</h1>

    <!-- Display Login Status Message -->
    {% if message %}
        <div id="message" style="text-align: center; color: {{ message_color }}; font-size: 1.2em; margin-bottom: 20px;">
            {{ message }}
        </div>
        {% if message_color == 'green' %}
            <!-- Redirect only if the message is green (successful login) -->
            <script>
                setTimeout(function() {
                    window.location.href = "{{ url_for('main.main_page') }}"; // Redirect to the main page
                }, 0);
            </script>
        {% endif %}
    {% endif %}

    <!-- Login Form -->
    <form action="{{ url_for('main.login') }}" method="post">
        <!-- Username -->
        <label for="username">Username</label>
        <input type="text" id="username" name="username" placeholder="Enter your username" required>

        <!-- Password -->
        <label for="password">Password</label>
        <div style="position: relative;">
            <input type="password" id="password" name="password" placeholder="Enter your password" required>
            <button type="button" onclick="togglePassword()" style="position: absolute; right: 10px; top: 5px; background: none; border: none; cursor: pointer;">üëÅÔ∏è</button>
        </div>
        <script>
            function togglePassword() {
                const passwordField = document.getElementById('password');
                const type = passwordField.type === 'password' ? 'text' : 'password';
                passwordField.type = type;
            }
        </script>

        <button type="submit" class="btn btn-black">Log in</button>
    </form>

    <!-- No Account / Sign Up -->
    <div style="text-align: right; margin-top: 20px;">
        <span class="no-account">No account:</span>
        <form action="{{ url_for('main.signup') }}" method="get" style="display: inline;">
            <button type="submit" class="btn btn-transparant">Sign Up</button>
        </form>
    </div>
</div>
{% endblock %}
