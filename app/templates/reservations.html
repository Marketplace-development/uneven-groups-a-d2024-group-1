{% extends 'base.html' %}

{% block head %}
<title>Make a Reservation</title>
{% endblock %}

{% block body %}
<div class="locations-container">
    <!-- Buttons in the right upper corner -->
    <div class="button-container" style="position: fixed; top: 20px; right: 20px; display: flex; flex-direction: column; gap: 0px; z-index: 999;">
        <form action="{{ url_for('main.main_page') }}" method="get" class="inline-form">
            <button type="submit" class="btn btn-transparant" style="width: 200px; font-size: 1em; padding: 10px 20px;">Main Page</button>
        </form>
        <form action="{{ url_for('main.home') }}" method="get" class="inline-form">
            <button type="submit" class="btn btn-black" style="width: 200px; font-size: 1em; padding: 10px 20px;">Log out</button>
        </form>
    </div>

    <!-- Logo -->
    <div style="display: flex; justify-content: center; align-items: center; height: 100%; margin-top: 20px;">
        <img src="{{ url_for('static', filename='images/logo_wit.jpg') }}" alt="logo" style="width: 150px;">
    </div>

    <!-- Page title and subtitle -->
    <h1 style="text-align: center; color: black; font-size: 2.5em; font-weight: bold;">Make a Reservation</h1>
    <p style="text-align: center; color: grey; font-size: 1.5em;">Create a new reservation</p>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <br>

    <!-- New Reservation Form -->
    <div class="form-wrapper">
        <form method="POST" action="{{ url_for('main.select_location') }}">
            <div class="reservation-form-grid">
                <!-- Number of Guests -->
                <div class="form-field">
                    <label for="number_of_guests">Number of Guests:</label>
                    <input type="number" id="number_of_guests" name="number_of_guests" placeholder="Enter the number of guests" min="1" required>
                </div>

                <!-- Study Time -->
                <div class="form-field">
                    <label for="study_time">Study Time (in minutes):</label>
                    <input type="number" name="study_time" id="study_time" placeholder="Enter study time in minutes" min="30" required>
                </div>
        
                <!-- Reservation Time -->
                <div class="form-field">
                    <label for="reservation_time">Reservation Time:</label>
                    <input type="datetime-local" name="reservation_time" id="reservation_time" min="{{ current_time }}" required>
                </div>
                
            </div>
    
            <div class="form-group">
                <button type="submit" class="btn btn-black">Select Your Location</button>
            </div>
        </form>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Find the flash message by targeting common classes for alert messages
        const flashMessages = document.querySelectorAll('.alert, .flash, .alert-success');
        flashMessages.forEach(function(flashMessage) {
            // Set a timeout to hide the message after 2 seconds
            setTimeout(function() {
                flashMessage.style.transition = 'opacity 1s ease-out';
                flashMessage.style.opacity = '0'; // Gradually fade out
                
                // After fading out, set display to 'none' to remove it from the layout
                setTimeout(function() {
                    flashMessage.style.display = 'none';
                }, 1000); // Matches the CSS transition time (1 second)
            }, 2000); // Wait 2 seconds before starting the fade-out
        });
    });
</script>
{% endblock %}
